<!DOCTYPE html>
<html>
<head>
	<title>Wifimaper</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='dbmanager.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='navmenu.css') }}" />
</head>

<nav class="top-menu">
  <a class="navbar-logo" href=""><img src="{{ url_for('static', filename='images/logo.svg')}}"></a>
  <ul class="menu-main">
    <li><a href="{{ url_for('index') }}">Map</a></li>
    <li><a href="{{ url_for('dbmanager') }}">Database manager</a></li>
  </ul>
</nav>

<body>

<table id="databasetable">
        <tr><th></th><th>Database name</th><th>Database type</th><th>Database host</th><th>Number of access points</th><th>Number of locations</th><th>Time interval</th><th>Description</th></tr>
        {% for db in dblist %}
            <tr
                {% if db['id'] == currentdbid %}
                    class="curentdb"
                {% elif db['dbexsist'] %}
                    class="availabledb"
                {% else %}
                    class="unavailabledb"
                {% endif %}
            ><td>
                {% if db['id'] == currentdbid %}
                    Ð¡urrent database
                {% elif not db['dbexsist'] %}
                    Database unavailable
                {% else %}
                    <button class="selectbtn" onclick="window.location.href='dbmanager/setcurentdb?dbid={{db['id']}}'">Select database</button>
                {% endif %}
             {% if db['id'] != currentdbid %}
             <img class="delbtn" onclick="window.location.href='#delform{{db['id']}}'" src="{{ url_for('static', filename='images/deleteicon.svg')}}">
             {% endif %}
             <img class="propbtn" onclick="window.location.href='#propform{{db['id']}}'" src="{{ url_for('static', filename='images/settingicon.svg')}}">
             </td><td>{{db['dbname']}}</td><td>{{db['type']}}</td><td>{{db['host']}}</td><td>{{db['numberofap']}}</td><td>{{db['numberofloc']}}</td><td>{{db['timefirst']}}-{{db['timelast']}}</td><td>{{db['description']}}</td></tr>
        {% endfor %}
</table>
{% for db in dblist %}
<a href="#x" class="overlay" id="propform{{db['id']}}"></a>
        <form class="modal" name="db{{db['id']}}" method="POST" action="/dbmanager/editinfo">
	        <input type="hidden" name="dbid" value={{db['id']}}>
	        <label>Database name: {{db['dbname']}}</label>
	        <label>Database type: {{db['type']}}</label>
            {% if db['type'] == "mysql" %}
            <label>Database host:</label>
	        <input type="text" class="host" name="host" value="{{db['host']}}" {% if db['id'] == currentdbid %}disabled{% endif %}>
	        <label>Database user:</label>
	        <input type="text" class="user" name="user" value="{{db['user']}}" {% if db['id'] == currentdbid %}disabled{% endif %}>
            <label>Database password:</label>
	        <input type="text" class="password" name="password" value="{{db['password']}}" {% if db['id'] == currentdbid %}disabled{% endif %}>
            {% endif %}
            <label>Description:</label>
            <textarea rows="4" cols="50" name="description" class="description" required>{{db['description']}}</textarea>
            <input name="submit" class="btn" type="submit" value="Save changes" />
        </form>
{% endfor %}
</body>
</html>
